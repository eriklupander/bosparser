<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>IL-2 BoS mission debriefing</title>
    <meta name="generator" content="Bootply"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/jquery-migrate-1.2.1.min.js"></script>
    <!--[if lt IE 9]>
    <script src="js/html5.js"></script>
    <![endif]-->

    <link href="css/styles.css" rel="stylesheet">
    <link href="css/tree.css" rel="stylesheet">
</head>
<body>

<div class="navbar navbar-fixed-top navbar-inverse">
    <div class="container">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#" id="missions-btn">Missions</a>
        <a class="navbar-brand" href="#" id="career-btn">Career stats</a>
    </div>
    <!-- /.container -->
</div>
<!-- /.navbar -->

<!-- HEADER 
=================================-->

<div class="jumbotron text-center" style="padding:48px  0px 8px 0px;">
    <div class="container">
        <div class="row">
            <div class="col col-lg-12 col-sm-12">
                <h1>BoS Mission Debriefing</h1>
                <button class="btn btn-info" href="#" id="scanbtn">Scan for reports</button>
                <button class="btn btn-danger" href="#" id="deletebtn">Delete all reports</button>
                <button class="btn btn-success disabled" href="#" id="mapbtn">Show map</button>
                <p class="hidden"><img src="/images/ajax-loader.gif"></p>
            </div>
        </div>
    </div>
</div>
<!-- /header container-->

<!-- CONTENT
=================================-->

<!-- Missions page -->
<div class="container">
<div id="missions-panel" class="row">
    <div class="col-md-3" id="leftCol">

        <div class="well">
            <ul class="nav nav-stacked" id="sidebar">
                <!-- Mission list goes here -->

            </ul>
        </div>

    </div>
    <div id="missions-inner" class="col-md-9 hidden">
        <div  class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Mission statistics</h3></div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-2 th">Mission</div>
                            <div class="col-md-10" id="mission-name"></div>
                        </div>
                        <div class="row">
                            <div class="col-md-2 th">Date</div>
                            <div class="col-md-2" id="mission-date"></div>
                            <div class="col-md-2 th">Time</div>
                            <div class="col-md-2" id="mission-time"></div>
                            <div class="col-md-2 th">Duration</div>
                            <div class="col-md-2" id="mission-duration"></div>
                        </div>
                        <div class="row">
                            <div class="col-md-2 th">Pilot name</div>
                            <div class="col-md-2" id="pilot-name"></div>
                            <div class="col-md-2 th">Targets killed</div>
                            <div class="col-md-2" id="ac-kills"></div>
                            <div class="col-md-2 th">Bullets fired</div>
                            <div class="col-md-2" id="bullets-fired"></div>
                        </div>
                        <div class="row">

                            <div class="col-md-2 th">Pilot aircraft</div>
                            <div class="col-md-2" id="pilot-plane"></div>
                            <div class="col-md-2 th">Targets dmgd</div>
                            <div class="col-md-2" id="ac-damaged"></div>
                            <div class="col-md-2 th">Bullets hit</div>
                            <div class="col-md-2" id="bullets-hit"></div>
                        </div>
                        <div class="row">
                            <div class="col-md-2 th">Aircraft status</div>
                            <div class="col-md-2" id="pilot-status"></div>
                            <div class="col-md-2 th">Crew killed</div>
                            <div class="col-md-2" id="crew-kills"></div>
                            <div class="col-md-2 th">Bullets left</div>
                            <div class="col-md-2" id="bullets-left"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">

                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Targets destroyed</h3></div>
                    <div class="panel-body" id="kills-table">
                        <div class="row">
                            <div class="col-md-2 th">Target</div>
                            <div class="col-md-3 th">Type</div>
                            <div class="col-md-1 th">ID</div>
                            <div class="col-md-2 th">Time</div>
                            <div class="col-md-2 th">Hits</div>
                            <div class="col-md-2 th"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Hits inflicted</h3></div>
                    <div class="panel-body" id="hits-table">
                        <div class="row">
                            <div class="col-md-2 th">Name</div>
                            <div class="col-md-3 th">Type</div>
                            <div class="col-md-1 th">ID</div>
                            <div class="col-md-1 th">Time</div>
                            <div class="col-md-3 th">Weapon</div>
                            <div class="col-md-2 th">Damage</div>
                        </div>

                    </div>
                </div>
            </div>


            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Hits taken</h3></div>
                    <div class="panel-body" id="hitstaken-table">
                        <div class="row">
                            <div class="col-md-2 th">From</div>
                            <div class="col-md-3 th">Type</div>
                            <div class="col-md-1 th">ID</div>
                            <div class="col-md-1 th">Time</div>
                            <div class="col-md-3 th">Weapon</div>
                            <div class="col-md-2 th">Damage</div>
                        </div>

                    </div>
                </div>
            </div>
            <!-- NOT COMPLETE YET
             <div class="col-md-12">
                 <div class="panel panel-default">
                     <div class="panel-heading"><h3>All objects registered in mission</h3></div>
                     <div class="panel-body">


                         <div id="objtree" class="tree well">

                         </div>
                     </div>

                 </div>
             </div>
              -->
        </div>
    </div>

    <div id="clickon" class="">Click on a mission to display stats</div>
    <hr>
    <!-- End missions page -->
</div>

<div class="row hidden" id="career-panel">
    <div class="col-md-12">

        <div class="row">
            <div class="col-md-12">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Overall statistics</h3></div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-3 th">Missions flown</div>
                            <div class="col-md-3" id="missions"></div>
                            <div class="col-md-2 th">Time flown</div>
                            <div class="col-md-4" id="totalDuration"></div>

                        </div>
                        <div class="row">
                            <div class="col-md-3 th">Missions survived</div>
                            <div class="col-md-3" id="missionsSurvived"></div>
                            <div class="col-md-2 th">Kills</div>
                            <div class="col-md-2" id="killCount"></div>
                        </div>
                        <div class="row">
                            <div class="col-md-3 th">Missions destroyed</div>
                            <div class="col-md-3" id="missionsDestroyed"></div>
                            <div class="col-md-2 th">Hits</div>
                            <div class="col-md-2" id="hitCount"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Sorties by aircraft type</h3></div>
                    <div class="panel-body" id="sorties-table">
                        <div class="row">
                            <div class="col-md-6 th">Aircraft</div>
                            <div class="col-md-6 th">Sorties</div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Victories in each aircraft type</h3></div>
                    <div class="panel-body" id="victories-table">
                        <div class="row">
                            <div class="col-md-6 th">Aircraft</div>
                            <div class="col-md-6 th">Victories</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Kills by object type</h3></div>
                    <div class="panel-body" id="killsbytype-table">
                        <div class="row">
                            <div class="col-md-6 th">Aircraft</div>
                            <div class="col-md-6 th">Kills</div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading"><h3>Hits by ammunition type</h3></div>
                    <div class="panel-body" id="ammo-table">
                        <div class="row">
                            <div class="col-md-6 th">Ammunition</div>
                            <div class="col-md-6 th">Hits</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

    <hr>
    <!-- /CONTENT ============-->


<!-- script references -->
<script src="js/bootstrap.min.js"></script>
<script src="js/bosparser.js"></script>
<script src="map/coordTranslator.js"></script>
<script src="map/renderer.js"></script>
<script src="map/maprenderer.js"></script>

</body>
</html>


<div class="modal fade" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">Scan result</h4>
            </div>
            <div class="modal-body">
                <p id="modal-content"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade" id="mapModal">
    <div id="mapModalDialog" class="modal-fullscreen-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span
                        class="sr-only">Close</span></button>
                <h4 class="modal-title">Mission map</h4>
            </div>
            <div class="modal-body"  style="text-align:center;">
                <p id="map-modal-content">
                    <span style="font-size:10pt;">Pan by holding left mouse button while dragging, zoom using scroll wheel or by pressing right mouse button while dragging</span>
                    <canvas id="map">
                    </canvas>

                </p>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modalspinner"><!-- Place at bottom of page --></div>

<div class="gameinfo-dialog hidden">
	<div class="col-md-12">
        <div class="row">
            <div class="col-md-12 th" id="gid_objectname">Name of object</div>
        </div>
        <div class="row">
            <div class="col-md-4">Time killed</div>
        	<div class="col-md-8" id="gid_timekilled">13:37</div>
        </div>
        <div class="row">
            <div class="col-md-4">Hits</div>
        	<div class="col-md-8" id="gid_hitcount">12</div>
        </div>
        <div class="row">
            <div class="col-md-4">Side</div>
        	<div class="col-md-8" id="gid_side">....</div>
        </div>
    </div>
</div>

<script>
    $body = $("body");

    $('#scanbtn').click(bosparser.scan);
    $('#deletebtn').click(bosparser.deleteAll);
    $('#missions-btn').click(bosparser.populateSidebar);
    $('#career-btn').click(bosparser.populateCareer);
    bosparser.populateSidebar();


    $(function () {
        $('.tree li:has(ul)').addClass('parent_li').find(' > span').attr('title', 'Collapse this branch');

        $('.tree li.parent_li > span').on('click', function (e) {
            var children = $(this).parent('li.parent_li').find(' > ul > li');
            if (children.is(":visible")) {
                children.hide('fast');
                $(this).attr('title', 'Expand').find(' > i').addClass('glyphicon-plus-sign').removeClass('glyphicon-minus-sign');
            } else {
                children.show('fast');
                $(this).attr('title', 'Collapse').find(' > i').addClass('glyphicon-minus-sign').removeClass('glyphicon-plus-sign');
            }
            e.stopPropagation();
        });

    });
</script>