bosparser
=========

Mission debriefing application for IL-2: Battle of Stalingrad.

The WW2 flight simulator "IL-2 Sturmovik: Battle of Stalingrad" from 1C Game Studios and 777 Studios is a high-fidelity simulation of aerial combat over the cold skies of Stalingrad in 1942.

However, as excellent as it is, it has some shortcomings including the total absence of mission debriefings after Single Missions and Quick Missions.

The "bosparser" application provides a way to get decent feedback from missions anyway by parsing log files generated by the simulator, stuffing them into a database and providing a simple web frontend to display your mission results.

Information included in the debriefings includes general mission information, number of kills, planes shot down and individual bullet hits on aircraft,



== Prerequisites ==

* A Java JRE, > 1.7 (see bottom of document for Java installation details)

== Installation instructions ==

1. Find your game installation directory such as c:\Program Files\SteamApps\common\IL-2 Sturmovik Battle of Stalingrad
2. In the installation /data folder, open "startup.cfg" and find the entries under [KEY = system]:

mgenlog = 1
mission_text_log = 1

Make sure these two are set to = 1 just as above. This will make the simulator write textual log files to your /data directory.

3. Optionally, the log output folder can be configured with the

text_log_folder = ""

property in "starup.cfg". Useful if you don't feel like cluttering your /data folder with hundreds of log files.

4. Download the .zip archive with the bosparser application. Unzip it somewhere, for example into c:\Program files\bosparser

You should now see these files in the folder you unzipped to:

bosparser.bat
bosparser-1.0-SNAPSHOT.war
/config/application.properties
README.md (this file)
LICENSE.md

5 Using your favourite text editor, open /config/application.properties file and edit the "reports.directory" property.
Set the property value to the folder your log files are written to, for example:

reports.directory = c:\Program Files\SteamApps\common\IL-2 Sturmovik Battle of Stalingrad\data

6 Optionally, you can change the "server.port" property to something other than the default HTTP port of 80.

7. To start bosparser, either use the bosparser.bat file or type the following in a command shell:

java -jar bosparser-1.0-SNAPSHOT.war

This will launch the bosparser application.
To access the GUI, open your preferred Web Browser (Chrome, Firefox, Internet Explorer or Safari for example) and enter "http://localhost" (most browsers can handle just "localhost" too)
* If you changed the HTTP port (server.port) property in application.properties, you will need to add the port number at the end: "http://localhost:8080"   if you changed to 8080.

The browser should now show a rather empty skeleton GUI. Click the "Scan" button in the top left corner and bosparser will scan & parse
the configured directory for mission log files. Click on one of the created mission reports on the left and behold a basic debriefing!



== TECHNICAL MUMBO JUMBO ==

Bosparser essentially consists of three parts:

* The log file parser which concatenates log files together and then makes a somewhat sensible object graph out of the relevant information.
* A server backend with a REST interface, a H2 database and some logic to persist and read report data between these two.
* A very simple web-based GUI to scan and read your reports.

The parser is just plain old crude ugly Java doing just as crude substring, regexp etc. stuff to make sense out of the log files.
The server backend is based on Spring Boot, Hibernate, Jackson, JodaTime and probably a few other 3rd party libraries I've forgotten about.
The web fronted uses Twitter Bootstrap for layout, jQuery and some old-school hand-written javascript to populate and load stuff over the REST interface.

== JAVA INSTALLATION INSTRUCTIONS ==

The bosparser requires a Java Virtual Machine, 1.7 or above. You can check for the presence of a Java Runtime Environment by opening a Windows command shell and typing:

java -version

Which should show an output such as:

java version "1.8.0_20"
Java(TM) SE Runtime Environment (build 1.8.0_20-b26)
Java HotSpot(TM) 64-Bit Server VM (build 25.20-b23, mixed mode)

If you're getting a

'java' is not recognized as an internal or external command,
operable program or batch file.

Then Java isn't properly available on your system. Either you need to download and install Java again or you need to find
your Java install directory and add its "/bin" folder to your PATH environment variable.

The latest installation package from Oracle should be available here: https://java.com/en/download/index.jsp

A JRE is sufficient, no need to download the full JDK.